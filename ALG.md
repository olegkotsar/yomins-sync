Состояния файлов:
    NEW - новый файл, требует загрузки на FTP
    SYNCED - файл синхронизирован (S3 и FTP идентичны)
    DELETED_ON_S3 - файл удалён в S3, требует удаления с FTP
    TEMP_DELETED - временное состояние для обработки
    ERROR - ошибка при синхронизации
Основной алгоритм:
    Запуск скинирования:
        Подготовка:
            Все файлы в статусе SYNCED -> переводим в TEMP_DELETED
            Файлы в DELETED_ON_S3 остаются как есть (возможно, предыдущая попытка удаления не завершилась)
            Файлы в NEW остаются как есть (прерванная предыдущая сессия)
        Сканирование S3 и обновление состояний:
            Для каждого файла в S3:
                Если нет в кеше -> NEW
                Если есть в кеше:
                    Статус TEMP_DELETED:
                        Если хеш совпадает -> SYNCED (файл не менялся)
                        Если хеш отличается -> NEW (файл изменился)
                    Статус NEW -> остаётся NEW
                    Статус DELETED_ON_S3 -> NEW (файл вернулся)
         Проверяем все записи в кеше и меняем статусы::
                Если статус был TEMP_DELETED -> DELETED_ON_S3 (нет на S3, значит удалён)
                Остальные статусы оставляем как есть
    Синхронизация:
        Обрабатываем NEW -> загружаем на FTP -> при успехе SYNCED
        Обрабатываем DELETED_ON_S3 -> удаляем с FTP -> при успехе удаляем из кеша
        В случае ошибки на шаге - статус остаётся прежним


| Предыдущее состояние | Найден в S3 | ETag тот же? | Новое состояние     |
| -------------------- | ----------- | ------------ | ------------------- |
| SYNCED               | ❌           | —            | TEMP\_DELETED       |
| TEMP\_DELETED        | ❌           | —            | DELETED\_ON\_S3     |
| TEMP\_DELETED        | ✅           | ✅           | SYNCED              |
| TEMP\_DELETED        | ✅           | ❌           | NEW                 |
| DELETED\_ON\_S3      | ✅           | —            | NEW                 |
| NEW                  | ✅           | —            | NEW (обновить ETag) |

